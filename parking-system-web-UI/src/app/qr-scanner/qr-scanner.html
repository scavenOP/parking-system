<section class="scanner-page">
  <div class="container">
    <div class="scanner-card" [@slideUp]>
      <div class="header">
        <h2>🎫 Parking Entry Scanner</h2>
        <p>Point your QR ticket to the camera or enter manually</p>
      </div>

      <div class="scanner-container">
        <!-- Simple video element -->
        <div class="camera-view">
          <video #videoElement autoplay playsinline muted class="video-stream"></video>
          <div class="scanner-overlay">
            <p class="scan-instruction">Point QR code to camera</p>
            <div class="camera-status">
              <p *ngIf="!errorMessage">📷 Camera Active</p>
              <p *ngIf="errorMessage" class="error">❌ {{errorMessage}}</p>
            </div>
          </div>
        </div>

        <!-- Manual input fallback -->
        <div class="manual-input">
          <h4>Or Enter QR Code Manually:</h4>
          <input 
            type="text" 
            [(ngModel)]="manualInput" 
            placeholder="Paste QR code content here"
            class="qr-input">
          <button 
            class="btn-validate" 
            (click)="validateManualInput()"
            [disabled]="!manualInput || isValidating">
            {{isValidating ? 'Validating...' : 'Validate Ticket'}}
          </button>
        </div>


      </div>

      <div class="error-message" *ngIf="errorMessage">
        <p>⚠️ {{errorMessage}}</p>
        <button class="btn-retry" (click)="retryCamera()">🔄 Retry Camera</button>
      </div>
    </div>
  </div>



<!-- Loading Modal -->
<div class="modal-overlay" *ngIf="isValidating" style="position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: 9999; background: rgba(0,0,0,0.8); display: flex; align-items: center; justify-content: center;">
  <div class="modal-content loading" style="background: white; border-radius: 15px; max-width: 400px; width: 90%; position: relative; z-index: 10000; text-align: center;">
    <div class="modal-body">
      <div class="spinner"></div>
      <h3>Validating Ticket...</h3>
      <p>Please wait while we verify your QR code</p>
    </div>
  </div>
</div>
</section>