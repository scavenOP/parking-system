<header class="header">
  <div class="header-content">
    <img src="https://assets.nicepagecdn.com/11a8ddce/6546849/images/Untitled-1.jpg" alt="Smart Parking Logo" class="logo">
    <nav class="nav">
      <a routerLink="/" class="nav-link" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}">Home</a>
      
      <!-- Show when user is NOT logged in -->
      <ng-container *ngIf="!currentUser">
        <div class="auth-links desktop-only">
          <a routerLink="/login" class="nav-link" routerLinkActive="active">Sign In</a>
          <a routerLink="/signup" class="nav-link signup-btn" routerLinkActive="active">Sign Up</a>
        </div>
        
        <!-- Mobile auth links -->
        <div class="mobile-auth" *ngIf="!currentUser">
          <a routerLink="/login" class="nav-link" routerLinkActive="active">Sign In</a>
          <a routerLink="/signup" class="nav-link signup-btn" routerLinkActive="active">Sign Up</a>
        </div>
      </ng-container>
      
      <!-- Mobile menu toggle -->
      <button class="mobile-menu-toggle" (click)="toggleMobileMenu()" *ngIf="currentUser">
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
      </button>
      
      <!-- Show when user IS logged in -->
      <ng-container *ngIf="currentUser">
        <!-- Desktop Navigation -->
        <div class="desktop-nav" [class.mobile-open]="isMobileMenuOpen">
          <!-- User role only -->
          <ng-container *ngIf="isUser()">
            <a routerLink="/parking-search" class="nav-link" routerLinkActive="active" (click)="closeMobileMenu()">Find Parking</a>
          </ng-container>
          
          <!-- User Dropdown -->
          <div class="user-dropdown" [class.open]="isDropdownOpen">
            <button class="user-dropdown-toggle" (click)="toggleDropdown()">
              Welcome, {{currentUser.Name}}! 
              <span class="dropdown-arrow">â–¼</span>
            </button>
            
            <div class="dropdown-menu" *ngIf="isDropdownOpen">
              <!-- User role options -->
              <ng-container *ngIf="isUser()">
                <a routerLink="/parking-search" class="dropdown-item" (click)="closeDropdown(); closeMobileMenu()">ğŸš— Find Parking</a>
                <a routerLink="/cars" class="dropdown-item" (click)="closeDropdown(); closeMobileMenu()">ğŸš™ My Cars</a>
              </ng-container>
              
              <!-- Common options -->
              <a routerLink="/dashboard" class="dropdown-item" (click)="closeDropdown(); closeMobileMenu()">ğŸ“Š Dashboard</a>
              <a routerLink="/reservations" class="dropdown-item" (click)="closeDropdown(); closeMobileMenu()">ğŸ“… Reservations</a>
              <a routerLink="/payment-history" class="dropdown-item" (click)="closeDropdown(); closeMobileMenu()">ğŸ’³ Payment History</a>
              <a routerLink="/settings" class="dropdown-item" (click)="closeDropdown(); closeMobileMenu()">âš™ï¸ Settings</a>
              
              <!-- Admin options -->
              <ng-container *ngIf="isAdmin()">
                <div class="dropdown-divider"></div>
                <a routerLink="/admin" class="dropdown-item" (click)="closeDropdown(); closeMobileMenu()">ğŸ› ï¸ Admin Panel</a>
              </ng-container>
              
              <div class="dropdown-divider"></div>
              <button class="dropdown-item logout-item" (click)="logout()">ğŸšª Logout</button>
            </div>
          </div>
        </div>
      </ng-container>
    </nav>
  </div>
</header>
